const express = require('express');
const app = express();
const bodyParser = require('body-parser');

app.use(bodyParser.json());

let projects = []; // This will store projects in-memory

// Create a new project
app.post('/projects', (req, res) => {
  const { title } = req.body;
  const newProject = {
    projectId: Date.now().toString(),
    title,
    createdDate: new Date().toISOString(),
    todos: []
  };
  projects.push(newProject);
  res.status(201).json(newProject);
});

// List all projects
app.get('/projects', (req, res) => {
  res.json(projects);
});

// View a project
app.get('/projects/:id', (req, res) => {
  const project = projects.find(p => p.projectId === req.params.id);
  if (!project) {
    return res.status(404).send('Project not found');
  }
  res.json(project);
});
